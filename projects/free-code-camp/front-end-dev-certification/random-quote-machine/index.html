<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Random Quote Machine</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  </head>
  <body>
    <div id="random_quote">
      <blockquote>
        This is a random quote
      </blockquote>
      <span>I am the author</span>
    </div>

    <div id="action">
      <button onclick="changeQuote()">Get A New Quote</button>
      <button onclick="tweet()">Send a Tweet</button>
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        changeQuote();
      });

      function changeQuote() {
        var newQuote = {};

        // Get quote from API
        $.ajax({
          type: "GET",
          cache: false,
          async: false,
          url: "http://quotesondesign.com/wp-json/posts",
          data: {"filter[orderby]": "rand", "filter[posts_per_page]": "1"},
          success: function(result, textStatus, jqXHR) {
            newQuote = result[0];
          },
          error: function(result, textStatus, jqXHR) {
            console.log("ERROR");
          }
        });

        // Change current quote to new quote
        $("#random_quote blockquote").html(newQuote["content"]);
        $("#random_quote span").html(newQuote["title"])
      }
      function tweet(quote, author) {
        var quote = $("#random_quote blockquote p").html() + " -" + $("#random_quote span").html()
        var url = "https://twitter.com/intent/tweet?hashtags=freecodecamp,quotes&text=";
        url += quote;

        window.open(url,'_blank');
      }
    </script>
  </body>
</html>
